make server
Запуск сервера...
Build version: N/A
Build date: N/A
Build commit: N/A
2025-03-11T22:55:22.685+0700	DEBUG	pgstorage/pgstorage.go:47	Connecting to database: postgres://metrics:password@localhost:5432/metrics?sslmode=disable

2025/03/11 22:55:22 INFO Запуск миграций... path=migrations/server
2025/03/11 22:55:22 INFO Нет новых миграций для применения.
2025-03-11T22:55:22.704+0700	INFO	logger/logger.go:18	logger middleware enabled
2025-03-11T22:55:22.704+0700	INFO	decompresspool/decompresspool.go:42	decompress middleware enabled
2025-03-11T22:55:22.705+0700	DEBUG	pgstorage/pgstorage.go:47	Connecting to database: postgres://metrics:password@localhost:5432/metrics?sslmode=disable

2025/03/11 22:55:22 INFO Запуск миграций... path=migrations/server
2025/03/11 22:55:22 INFO Нет новых миграций для применения.
2025-03-11T22:55:22.728+0700	INFO	app/app.go:41	starting server	{"config": {"Addr":"localhost:8080","StoreInterval":300,"FileStoragePath":"/tmp/metrics-db.json","Restore":true,"Database":{"DSN":"postgres://metrics:password@localhost:5432/metrics?sslmode=disable","MigrationsPath":"migrations/server"},"PrivateKey":"private_key_example","EnablePprof":false,"PrivateRSAKey":null,"ConfigFile":""}}
2025-03-11T22:55:22.729+0700	INFO	app/app.go:57	server is listening	{"addr": "localhost:8080"}
2025-03-11T22:55:38.138+0700	DEBUG	decompresspool/decompresspool.go:50	content encoded with gzip, replacing body with gzip.Reader
2025-03-11T22:55:38.138+0700	DEBUG	crypto/crypto.go:151	validateRequest => sign.VerifyHMACSHA256	{"hash_from_request": "902cce0a2d193a606fe00b5f8f8bbf6010344a7776d9bfcc29e5c51542857f61", "calc_hash": "902cce0a2d193a606fe00b5f8f8bbf6010344a7776d9bfcc29e5c51542857f61"}
2025-03-11T22:55:38.138+0700	DEBUG	updates/json_updates.go:79	validateRequest => sign.VerifyHMACSHA256	{"hash_from_request": "902cce0a2d193a606fe00b5f8f8bbf6010344a7776d9bfcc29e5c51542857f61", "calc_hash": "902cce0a2d193a606fe00b5f8f8bbf6010344a7776d9bfcc29e5c51542857f61", "headers": {"Accept":["application/json"],"Accept-Encoding":["gzip"],"Content-Encoding":["gzip"],"Content-Length":["661"],"Content-Type":["application/json"],"Hashsha256":["902cce0a2d193a606fe00b5f8f8bbf6010344a7776d9bfcc29e5c51542857f61"],"User-Agent":["go-resty/2.12.0 (https://github.com/go-resty/resty)"]}, "body": "[{\"id\":\"Alloc\",\"type\":\"gauge\",\"value\":516728},{\"id\":\"TotalAlloc\",\"type\":\"gauge\",\"value\":516728},{\"id\":\"CPUutilization9\",\"type\":\"gauge\",\"value\":5.699481865335761},{\"id\":\"CPUutilization18\",\"type\":\"gauge\",\"value\":2.010050251218157},{\"id\":\"Mallocs\",\"type\":\"gauge\",\"value\":1749},{\"id\":\"FreeMemory\",\"type\":\"gauge\",\"value\":1391738880},{\"id\":\"CPUutilization3\",\"type\":\"gauge\",\"value\":3.0612244896443994},{\"id\":\"CPUutilization4\",\"type\":\"gauge\",\"value\":0},{\"id\":\"CPUutilization12\",\"type\":\"gauge\",\"value\":0.5000000000109139},{\"id\":\"RandomValue\",\"type\":\"gauge\",\"value\":0.9166490409047042},{\"id\":\"HeapSys\",\"type\":\"gauge\",\"value\":3735552},{\"id\":\"Lookups\",\"type\":\"gauge\",\"value\":0},{\"id\":\"MCacheSys\",\"type\":\"gauge\",\"value\":31200},{\"id\":\"CPUutilization8\",\"type\":\"gauge\",\"value\":3.9800995025559978},{\"id\":\"CPUutilization15\",\"type\":\"gauge\",\"value\":2.0100502513095635},{\"id\":\"Frees\",\"type\":\"gauge\",\"value\":133},{\"id\":\"TotalMemory\",\"type\":\"gauge\",\"value\":16476016640},{\"id\":\"CPUutilization11\",\"type\":\"gauge\",\"value\":5.050505050479067},{\"id\":\"CPUutilization14\",\"type\":\"gauge\",\"value\":2.020202020205732},{\"id\":\"CPUutilization13\",\"type\":\"gauge\",\"value\":1.522842639511417},{\"id\":\"CPUutilization19\",\"type\":\"gauge\",\"value\":1.5075376884821727},{\"id\":\"GCSys\",\"type\":\"gauge\",\"value\":1795072},{\"id\":\"StackSys\",\"type\":\"gauge\",\"value\":458752},{\"id\":\"Sys\",\"type\":\"gauge\",\"value\":8344840},{\"id\":\"CPUutilization10\",\"type\":\"gauge\",\"value\":0.5000000000109139},{\"id\":\"NextGC\",\"type\":\"gauge\",\"value\":4194304},{\"id\":\"OtherSys\",\"type\":\"gauge\",\"value\":827628},{\"id\":\"CPUutilization5\",\"type\":\"gauge\",\"value\":5.128205127726761},{\"id\":\"CPUutilization6\",\"type\":\"gauge\",\"value\":1.5151515151988413},{\"id\":\"HeapAlloc\",\"type\":\"gauge\",\"value\":516728},{\"id\":\"HeapIdle\",\"type\":\"gauge\",\"value\":2449408},{\"id\":\"HeapInuse\",\"type\":\"gauge\",\"value\":1286144},{\"id\":\"MCacheInuse\",\"type\":\"gauge\",\"value\":24000},{\"id\":\"CPUutilization16\",\"type\":\"gauge\",\"value\":1.5075376885735792},{\"id\":\"CPUutilization2\",\"type\":\"gauge\",\"value\":1.999999999985448},{\"id\":\"MSpanSys\",\"type\":\"gauge\",\"value\":48960},{\"id\":\"NumForcedGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"PauseTotalNs\",\"type\":\"gauge\",\"value\":0},{\"id\":\"StackInuse\",\"type\":\"gauge\",\"value\":458752},{\"id\":\"LastGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"MSpanInuse\",\"type\":\"gauge\",\"value\":34880},{\"id\":\"NumGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"CPUutilization1\",\"type\":\"gauge\",\"value\":4.123711340291248},{\"id\":\"BuckHashSys\",\"type\":\"gauge\",\"value\":1447676},{\"id\":\"GCCPUFraction\",\"type\":\"gauge\",\"value\":0},{\"id\":\"HeapObjects\",\"type\":\"gauge\",\"value\":1616},{\"id\":\"HeapReleased\",\"type\":\"gauge\",\"value\":2383872},{\"id\":\"CPUutilization7\",\"type\":\"gauge\",\"value\":13.70558375597209},{\"id\":\"CPUutilization17\",\"type\":\"gauge\",\"value\":2.9999999998835847},{\"id\":\"CPUutilization20\",\"type\":\"gauge\",\"value\":1.5075376883466707},{\"id\":\"PollCount\",\"type\":\"counter\",\"delta\":1}]"}
2025-03-11T22:55:38.169+0700	INFO	updates/json_updates.go:57	Metrics updated successfully
2025-03-11T22:55:38.171+0700	INFO	logger/logger.go:40	request completed	{"method": "POST", "path": "/updates", "remote_addr": "127.0.0.1:38332", "user_agent": "go-resty/2.12.0 (https://github.com/go-resty/resty)", "request_id": "ubuntu/6gtxOC4v7d-000001", "headers": {"Accept":["application/json"],"Accept-Encoding":["gzip"],"Content-Encoding":["gzip"],"Content-Length":["661"],"Content-Type":["application/json"],"Hashsha256":["902cce0a2d193a606fe00b5f8f8bbf6010344a7776d9bfcc29e5c51542857f61"],"User-Agent":["go-resty/2.12.0 (https://github.com/go-resty/resty)"]}, "request_body": "[{\"id\":\"Alloc\",\"type\":\"gauge\",\"value\":516728},{\"id\":\"TotalAlloc\",\"type\":\"gauge\",\"value\":516728},{\"id\":\"CPUutilization9\",\"type\":\"gauge\",\"value\":5.699481865335761},{\"id\":\"CPUutilization18\",\"type\":\"gauge\",\"value\":2.010050251218157},{\"id\":\"Mallocs\",\"type\":\"gauge\",\"value\":1749},{\"id\":\"FreeMemory\",\"type\":\"gauge\",\"value\":1391738880},{\"id\":\"CPUutilization3\",\"type\":\"gauge\",\"value\":3.0612244896443994},{\"id\":\"CPUutilization4\",\"type\":\"gauge\",\"value\":0},{\"id\":\"CPUutilization12\",\"type\":\"gauge\",\"value\":0.5000000000109139},{\"id\":\"RandomValue\",\"type\":\"gauge\",\"value\":0.9166490409047042},{\"id\":\"HeapSys\",\"type\":\"gauge\",\"value\":3735552},{\"id\":\"Lookups\",\"type\":\"gauge\",\"value\":0},{\"id\":\"MCacheSys\",\"type\":\"gauge\",\"value\":31200},{\"id\":\"CPUutilization8\",\"type\":\"gauge\",\"value\":3.9800995025559978},{\"id\":\"CPUutilization15\",\"type\":\"gauge\",\"value\":2.0100502513095635},{\"id\":\"Frees\",\"type\":\"gauge\",\"value\":133},{\"id\":\"TotalMemory\",\"type\":\"gauge\",\"value\":16476016640},{\"id\":\"CPUutilization11\",\"type\":\"gauge\",\"value\":5.050505050479067},{\"id\":\"CPUutilization14\",\"type\":\"gauge\",\"value\":2.020202020205732},{\"id\":\"CPUutilization13\",\"type\":\"gauge\",\"value\":1.522842639511417},{\"id\":\"CPUutilization19\",\"type\":\"gauge\",\"value\":1.5075376884821727},{\"id\":\"GCSys\",\"type\":\"gauge\",\"value\":1795072},{\"id\":\"StackSys\",\"type\":\"gauge\",\"value\":458752},{\"id\":\"Sys\",\"type\":\"gauge\",\"value\":8344840},{\"id\":\"CPUutilization10\",\"type\":\"gauge\",\"value\":0.5000000000109139},{\"id\":\"NextGC\",\"type\":\"gauge\",\"value\":4194304},{\"id\":\"OtherSys\",\"type\":\"gauge\",\"value\":827628},{\"id\":\"CPUutilization5\",\"type\":\"gauge\",\"value\":5.128205127726761},{\"id\":\"CPUutilization6\",\"type\":\"gauge\",\"value\":1.5151515151988413},{\"id\":\"HeapAlloc\",\"type\":\"gauge\",\"value\":516728},{\"id\":\"HeapIdle\",\"type\":\"gauge\",\"value\":2449408},{\"id\":\"HeapInuse\",\"type\":\"gauge\",\"value\":1286144},{\"id\":\"MCacheInuse\",\"type\":\"gauge\",\"value\":24000},{\"id\":\"CPUutilization16\",\"type\":\"gauge\",\"value\":1.5075376885735792},{\"id\":\"CPUutilization2\",\"type\":\"gauge\",\"value\":1.999999999985448},{\"id\":\"MSpanSys\",\"type\":\"gauge\",\"value\":48960},{\"id\":\"NumForcedGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"PauseTotalNs\",\"type\":\"gauge\",\"value\":0},{\"id\":\"StackInuse\",\"type\":\"gauge\",\"value\":458752},{\"id\":\"LastGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"MSpanInuse\",\"type\":\"gauge\",\"value\":34880},{\"id\":\"NumGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"CPUutilization1\",\"type\":\"gauge\",\"value\":4.123711340291248},{\"id\":\"BuckHashSys\",\"type\":\"gauge\",\"value\":1447676},{\"id\":\"GCCPUFraction\",\"type\":\"gauge\",\"value\":0},{\"id\":\"HeapObjects\",\"type\":\"gauge\",\"value\":1616},{\"id\":\"HeapReleased\",\"type\":\"gauge\",\"value\":2383872},{\"id\":\"CPUutilization7\",\"type\":\"gauge\",\"value\":13.70558375597209},{\"id\":\"CPUutilization17\",\"type\":\"gauge\",\"value\":2.9999999998835847},{\"id\":\"CPUutilization20\",\"type\":\"gauge\",\"value\":1.5075376883466707},{\"id\":\"PollCount\",\"type\":\"counter\",\"delta\":1}]", "status": 200, "response_bytes": 56, "response_headers": {"Content-Encoding":["gzip"],"Content-Type":["application/json"],"Hashsha256":["20d913019bca8c31c1566976b46c8aaa3f1b57627b61ae9b57868fc047b48c67"],"Vary":["Accept-Encoding"]}, "response_body": "{\"status\":\"OK\",\"message\":\"Metrics updated successfully\"}", "duration": "32.666575ms"}
^C2025-03-11T22:55:43.563+0700	INFO	app/app.go:70	shutdown signal received	{"signal": "interrupt"}
2025-03-11T22:55:43.564+0700	INFO	app/app.go:83	server shutdown completed
2025-03-11T22:55:48.568+0700	INFO	app/app.go:91	all pending operations completed
2025-03-11T22:55:48.568+0700	DEBUG	server/main.go:106	server stopped
make: *** [Makefile:36: server] Interrupt