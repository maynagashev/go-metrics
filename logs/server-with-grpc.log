Build version: N/A
Build date: N/A
Build commit: N/A
2025-03-19T22:07:11.885+0700	DEBUG	pgstorage/pgstorage.go:46	Connecting to database: postgres://metrics:password@localhost:5432/metrics?sslmode=disable

2025/03/19 22:07:11 INFO Запуск миграций... path=migrations/server
2025/03/19 22:07:11 INFO Нет новых миграций для применения.
2025-03-19T22:07:11.916+0700	INFO	grpc/server.go:67	starting gRPC server	{"address": "localhost:9090"}
2025-03-19T22:07:11.916+0700	INFO	grpc/server.go:122	gRPC server started	{"address": "localhost:9090"}
2025-03-19T22:07:11.917+0700	INFO	logger/logger.go:17	logger middleware enabled
2025-03-19T22:07:11.917+0700	INFO	decompresspool/decompresspool.go:42	decompress middleware enabled
2025-03-19T22:07:11.917+0700	DEBUG	pgstorage/pgstorage.go:46	Connecting to database: postgres://metrics:password@localhost:5432/metrics?sslmode=disable

2025/03/19 22:07:11 INFO Запуск миграций... path=migrations/server
2025/03/19 22:07:11 INFO Нет новых миграций для применения.
2025-03-19T22:07:11.949+0700	INFO	app/app.go:41	starting server	{"config": {"Addr":"localhost:8080","StoreInterval":300,"FileStoragePath":"/tmp/metrics-db.json","Restore":true,"Database":{"DSN":"postgres://metrics:password@localhost:5432/metrics?sslmode=disable","MigrationsPath":"migrations/server"},"GRPC":{"Addr":"localhost:9090","Enabled":true,"MaxConn":100,"Timeout":5},"PrivateKey":"private_key_example","EnablePprof":false,"PrivateRSAKey":null,"ConfigFile":"","TrustedSubnet":""}}
2025-03-19T22:07:11.950+0700	INFO	app/app.go:57	server is listening	{"addr": "localhost:8080"}
2025-03-19T22:07:27.710+0700	DEBUG	update/json_update.go:78	request body	{"body": "{\"id\":\"TestGauge\",\"type\":\"gauge\",\"value\":123.45}"}
2025-03-19T22:07:27.710+0700	DEBUG	update/json_update.go:40	parsed metric	{"metric": {"id":"TestGauge","type":"gauge","value":123.45}}
2025-03-19T22:07:27.722+0700	DEBUG	decompresspool/decompresspool.go:50	content encoded with gzip, replacing body with gzip.Reader
2025-03-19T22:07:27.723+0700	INFO	logger/logger.go:39	request completed	{"method": "POST", "path": "/metrics/updates", "remote_addr": "127.0.0.1:59070", "user_agent": "go-resty/2.12.0 (https://github.com/go-resty/resty)", "request_id": "ubuntu/WmYVUl91gn-000002", "headers": {"Accept":["application/json"],"Accept-Encoding":["gzip"],"Content-Encoding":["gzip"],"Content-Length":["362"],"Content-Type":["application/json"],"User-Agent":["go-resty/2.12.0 (https://github.com/go-resty/resty)"],"X-Real-Ip":["100.64.19.228"]}, "request_body": "[{\"id\":\"LastGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"NextGC\",\"type\":\"gauge\",\"value\":4194304},{\"id\":\"MCacheInuse\",\"type\":\"gauge\",\"value\":24000},{\"id\":\"PauseTotalNs\",\"type\":\"gauge\",\"value\":0},{\"id\":\"Frees\",\"type\":\"gauge\",\"value\":181},{\"id\":\"HeapObjects\",\"type\":\"gauge\",\"value\":2439},{\"id\":\"MSpanInuse\",\"type\":\"gauge\",\"value\":35040},{\"id\":\"MSpanSys\",\"type\":\"gauge\",\"value\":48960},{\"id\":\"Sys\",\"type\":\"gauge\",\"value\":8082696},{\"id\":\"TotalAlloc\",\"type\":\"gauge\",\"value\":675824},{\"id\":\"GCCPUFraction\",\"type\":\"gauge\",\"value\":0},{\"id\":\"MCacheSys\",\"type\":\"gauge\",\"value\":31200},{\"id\":\"NumGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"HeapInuse\",\"type\":\"gauge\",\"value\":1581056},{\"id\":\"HeapSys\",\"type\":\"gauge\",\"value\":3735552},{\"id\":\"NumForcedGC\",\"type\":\"gauge\",\"value\":0},{\"id\":\"HeapAlloc\",\"type\":\"gauge\",\"value\":675824},{\"id\":\"HeapIdle\",\"type\":\"gauge\",\"value\":2154496},{\"id\":\"Lookups\",\"type\":\"gauge\",\"value\":0},{\"id\":\"StackInuse\",\"type\":\"gauge\",\"value\":458752},{\"id\":\"StackSys\",\"type\":\"gauge\",\"value\":458752},{\"id\":\"BuckHashSys\",\"type\":\"gauge\",\"value\":1448703},{\"id\":\"GCSys\",\"type\":\"gauge\",\"value\":1893760},{\"id\":\"HeapReleased\",\"type\":\"gauge\",\"value\":2154496},{\"id\":\"Mallocs\",\"type\":\"gauge\",\"value\":2620},{\"id\":\"OtherSys\",\"type\":\"gauge\",\"value\":465769},{\"id\":\"Alloc\",\"type\":\"gauge\",\"value\":675824},{\"id\":\"PollCount\",\"type\":\"counter\",\"delta\":0}]", "status": 404, "response_bytes": 19, "response_headers": {"Content-Type":["text/plain; charset=utf-8"],"Hashsha256":["e1d3470bcf658b828a803d0d4af963acc10a0ac3e00420dd6c55d4a254cfead1"],"X-Content-Type-Options":["nosniff"]}, "response_body": "404 page not found\n", "duration": "98.721µs"}
2025-03-19T22:07:27.773+0700	INFO	update/json_update.go:61	metric Metric{Name: TestGauge, Type: gauge, Value: 123.450000} updated, result: Metric{Name: TestGauge, Type: gauge, Value: 123.450000}
2025-03-19T22:07:27.794+0700	INFO	logger/logger.go:39	request completed	{"method": "POST", "path": "/update", "remote_addr": "127.0.0.1:59062", "user_agent": "Go-http-client/1.1", "request_id": "ubuntu/WmYVUl91gn-000001", "headers": {"Accept-Encoding":["gzip"],"Content-Length":["48"],"Content-Type":["application/json"],"User-Agent":["Go-http-client/1.1"],"X-Real-Ip":["192.168.1.1"]}, "request_body": "{\"id\":\"TestGauge\",\"type\":\"gauge\",\"value\":123.45}", "status": 200, "response_bytes": 163, "response_headers": {"Content-Encoding":["gzip"],"Content-Type":["application/json"],"Hashsha256":["4ca68847e54ba8c547be73cbbcfa5cbca2a4e61a638267b5b55ddea9b40ac653"],"Vary":["Accept-Encoding"]}, "response_body": "{\"status\":\"OK\",\"message\":\"metric Metric{Name: TestGauge, Type: gauge, Value: 123.450000} updated, result: Metric{Name: TestGauge, Type: gauge, Value: 123.450000}\"}", "duration": "84.273062ms"}
2025-03-19T22:07:27.809+0700	DEBUG	update/json_update.go:78	request body	{"body": "{\"id\":\"TestGauge\",\"type\":\"gauge\",\"value\":123.45}"}
2025-03-19T22:07:27.810+0700	DEBUG	update/json_update.go:40	parsed metric	{"metric": {"id":"TestGauge","type":"gauge","value":123.45}}
2025-03-19T22:07:27.816+0700	INFO	update/json_update.go:61	metric Metric{Name: TestGauge, Type: gauge, Value: 123.450000} updated, result: Metric{Name: TestGauge, Type: gauge, Value: 123.450000}
2025-03-19T22:07:27.818+0700	INFO	logger/logger.go:39	request completed	{"method": "POST", "path": "/update", "remote_addr": "127.0.0.1:59078", "user_agent": "Go-http-client/1.1", "request_id": "ubuntu/WmYVUl91gn-000003", "headers": {"Accept-Encoding":["gzip"],"Content-Length":["48"],"User-Agent":["Go-http-client/1.1"]}, "request_body": "{\"id\":\"TestGauge\",\"type\":\"gauge\",\"value\":123.45}", "status": 200, "response_bytes": 163, "response_headers": {"Content-Encoding":["gzip"],"Content-Type":["application/json"],"Hashsha256":["4ca68847e54ba8c547be73cbbcfa5cbca2a4e61a638267b5b55ddea9b40ac653"],"Vary":["Accept-Encoding"]}, "response_body": "{\"status\":\"OK\",\"message\":\"metric Metric{Name: TestGauge, Type: gauge, Value: 123.450000} updated, result: Metric{Name: TestGauge, Type: gauge, Value: 123.450000}\"}", "duration": "8.818151ms"}
2025-03-19T22:07:27.924+0700	INFO	logger/logger.go:39	request completed	{"method": "POST", "path": "/value", "remote_addr": "127.0.0.1:59088", "user_agent": "Go-http-client/1.1", "request_id": "ubuntu/WmYVUl91gn-000004", "headers": {"Accept-Encoding":["gzip"],"Content-Length":["33"],"Content-Type":["application/json"],"User-Agent":["Go-http-client/1.1"],"X-Real-Ip":["192.168.1.1"]}, "request_body": "{\"id\":\"TestGauge\",\"type\":\"gauge\"}", "status": 200, "response_bytes": 48, "response_headers": {"Content-Encoding":["gzip"],"Content-Type":["application/json"],"Hashsha256":["96d52c185d37514e694874bb5e60f10ce0b5d9cda7a8f5bce1f969cf5288af39"],"Vary":["Accept-Encoding"]}, "response_body": "{\"id\":\"TestGauge\",\"type\":\"gauge\",\"value\":123.45}", "duration": "2.037458ms"}
2025-03-19T22:07:27.929+0700	DEBUG	updates/json_updates.go:76	validateRequest => sign.VerifyHMACSHA256	{"hash_from_request": "", "calc_hash": "", "headers": {"Accept-Encoding":["gzip"],"Content-Length":["101"],"Content-Type":["application/json"],"User-Agent":["Go-http-client/1.1"],"X-Real-Ip":["192.168.1.1"]}, "body": "[{\"id\":\"TestGauge1\",\"type\":\"gauge\",\"value\":123.45},{\"id\":\"TestCounter1\",\"type\":\"counter\",\"delta\":42}]"}
2025-03-19T22:07:27.945+0700	INFO	updates/json_updates.go:54	Metrics updated successfully
2025-03-19T22:07:27.945+0700	INFO	logger/logger.go:39	request completed	{"method": "POST", "path": "/updates/", "remote_addr": "127.0.0.1:59088", "user_agent": "Go-http-client/1.1", "request_id": "ubuntu/WmYVUl91gn-000005", "headers": {"Accept-Encoding":["gzip"],"Content-Length":["101"],"Content-Type":["application/json"],"User-Agent":["Go-http-client/1.1"],"X-Real-Ip":["192.168.1.1"]}, "request_body": "[{\"id\":\"TestGauge1\",\"type\":\"gauge\",\"value\":123.45},{\"id\":\"TestCounter1\",\"type\":\"counter\",\"delta\":42}]", "status": 200, "response_bytes": 56, "response_headers": {"Content-Encoding":["gzip"],"Content-Type":["application/json"],"Hashsha256":["20d913019bca8c31c1566976b46c8aaa3f1b57627b61ae9b57868fc047b48c67"],"Vary":["Accept-Encoding"]}, "response_body": "{\"status\":\"OK\",\"message\":\"Metrics updated successfully\"}", "duration": "16.524996ms"}
2025-03-19T22:07:27.988+0700	INFO	logger/logger.go:39	request completed	{"method": "GET", "path": "/ping", "remote_addr": "127.0.0.1:59090", "user_agent": "Go-http-client/1.1", "request_id": "ubuntu/WmYVUl91gn-000006", "headers": {"Accept-Encoding":["gzip"],"User-Agent":["Go-http-client/1.1"],"X-Real-Ip":["192.168.1.1"]}, "request_body": "", "status": 200, "response_bytes": 32, "response_headers": {"Content-Encoding":["gzip"],"Content-Type":["application/json"],"Hashsha256":["73cba2d0e5c3eb152b24388f61573ff57fc51c364394dc282649f988f4b260b2"],"Vary":["Accept-Encoding"]}, "response_body": "{\"status\":\"OK\",\"message\":\"pong\"}", "duration": "38.507787ms"}
