=== RUN   TestMustParseFlags
=== RUN   TestMustParseFlags/default_values
=== RUN   TestMustParseFlags/command_line_arguments
=== RUN   TestMustParseFlags/environment_variables_override
=== RUN   TestMustParseFlags/invalid_report_interval_env
=== RUN   TestMustParseFlags/invalid_poll_interval_env
=== RUN   TestMustParseFlags/invalid_rate_limit_env
=== RUN   TestMustParseFlags/rate_limit_less_than_1
=== RUN   TestMustParseFlags/minimum_intervals
--- PASS: TestMustParseFlags (0.00s)
    --- PASS: TestMustParseFlags/default_values (0.00s)
    --- PASS: TestMustParseFlags/command_line_arguments (0.00s)
    --- PASS: TestMustParseFlags/environment_variables_override (0.00s)
    --- PASS: TestMustParseFlags/invalid_report_interval_env (0.00s)
    --- PASS: TestMustParseFlags/invalid_poll_interval_env (0.00s)
    --- PASS: TestMustParseFlags/invalid_rate_limit_env (0.00s)
    --- PASS: TestMustParseFlags/rate_limit_less_than_1 (0.00s)
    --- PASS: TestMustParseFlags/minimum_intervals (0.00s)
=== RUN   TestMain
time=2025-02-18T12:09:56.996+07:00 level=DEBUG msg="parsed flags and env variables" flags="{Server:{Addr:localhost:9090 ReportInterval:5 PollInterval:2} PrivateKey:test-key RateLimit:5 EnablePprof:false PprofPort:6060}"
--- PASS: TestMain (0.00s)
=== RUN   TestInitLogger
time=2025-02-18T12:09:56.997+07:00 level=DEBUG msg="test message"
--- PASS: TestInitLogger (0.00s)
=== RUN   TestInitPprof
=== RUN   TestInitPprof/profiling_disabled
=== RUN   TestInitPprof/profiling_enabled
--- PASS: TestInitPprof (0.20s)
    --- PASS: TestInitPprof/profiling_disabled (0.10s)
    --- PASS: TestInitPprof/profiling_enabled (0.10s)
=== RUN   TestStartPProf
=== RUN   TestStartPProf/empty_address
=== RUN   TestStartPProf/valid_address
--- PASS: TestStartPProf (0.20s)
    --- PASS: TestStartPProf/empty_address (0.10s)
    --- PASS: TestStartPProf/valid_address (0.10s)
=== RUN   TestStartPProf_ServerError
time=2025-02-18T12:09:57.507+07:00 level=ERROR msg="Failed to start pprof server" error="listen tcp 127.0.0.1:9996: bind: address already in use"
--- PASS: TestStartPProf_ServerError (0.20s)
PASS
ok  	github.com/maynagashev/go-metrics/cmd/agent	(cached)
=== RUN   TestRun
=== RUN   TestRun/empty_dsn
=== RUN   TestRun/empty_migrations_path
--- PASS: TestRun (0.00s)
    --- PASS: TestRun/empty_dsn (0.00s)
    --- PASS: TestRun/empty_migrations_path (0.00s)
=== RUN   TestMain_Integration
=== RUN   TestMain_Integration/no_args
=== RUN   TestMain_Integration/only_dsn
/tmp/go-build1245067342/b189/migrate.test flag redefined: d
=== RUN   TestMain_Integration/only_migrations_path
/tmp/go-build1245067342/b189/migrate.test flag redefined: d
--- PASS: TestMain_Integration (0.00s)
    --- PASS: TestMain_Integration/no_args (0.00s)
    --- PASS: TestMain_Integration/only_dsn (0.00s)
    --- PASS: TestMain_Integration/only_migrations_path (0.00s)
PASS
ok  	github.com/maynagashev/go-metrics/cmd/migrate	(cached)
?   	github.com/maynagashev/go-metrics/cmd/server	[no test files]
?   	github.com/maynagashev/go-metrics/internal/config	[no test files]
?   	github.com/maynagashev/go-metrics/internal/contracts/metrics	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/app	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/handlers/json/index	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/handlers/json/updates	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/handlers/plain/index	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/middleware/decompress	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/middleware/decompresspool	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/middleware/logger	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/storage/pgstorage	[no test files]
?   	github.com/maynagashev/go-metrics/internal/server/storage/pgstorage/migration	[no test files]
?   	github.com/maynagashev/go-metrics/mocks	[no test files]
?   	github.com/maynagashev/go-metrics/pkg/middleware/gzip	[no test files]
?   	github.com/maynagashev/go-metrics/pkg/random	[no test files]
?   	github.com/maynagashev/go-metrics/pkg/response	[no test files]
?   	github.com/maynagashev/go-metrics/pkg/sign	[no test files]
=== RUN   Example_update
--- PASS: Example_update (0.01s)
=== RUN   Example_getValue
--- PASS: Example_getValue (0.11s)
=== RUN   Example_updateBatch
--- PASS: Example_updateBatch (0.01s)
=== RUN   Example_ping
--- PASS: Example_ping (0.00s)
PASS
ok  	github.com/maynagashev/go-metrics/example	0.132s
=== RUN   TestAgent_collectRuntimeMetrics
=== RUN   TestAgent_collectRuntimeMetrics/collect_runtime_metrics
2025/02/18 12:09:57 INFO read metrics for job poll_count=0
2025/02/18 12:09:57 INFO reset poll count poll_count=0
--- PASS: TestAgent_collectRuntimeMetrics (0.00s)
    --- PASS: TestAgent_collectRuntimeMetrics/collect_runtime_metrics (0.00s)
PASS
ok  	github.com/maynagashev/go-metrics/internal/agent	(cached)
testing: warning: no tests to run
PASS
ok  	github.com/maynagashev/go-metrics/internal/benchmarks	(cached) [no tests to run]
=== RUN   TestHandle_Success
--- PASS: TestHandle_Success (0.00s)
PASS
ok  	github.com/maynagashev/go-metrics/internal/server/handlers/json/ping	(cached)
=== RUN   TestUpdateHandler
=== RUN   TestUpdateHandler/update_gauge
=== RUN   TestUpdateHandler/update_counter
=== RUN   TestUpdateHandler/invalid_metrics_type
=== RUN   TestUpdateHandler/invalid_url
--- PASS: TestUpdateHandler (0.00s)
    --- PASS: TestUpdateHandler/update_gauge (0.00s)
    --- PASS: TestUpdateHandler/update_counter (0.00s)
    --- PASS: TestUpdateHandler/invalid_metrics_type (0.00s)
    --- PASS: TestUpdateHandler/invalid_url (0.00s)
PASS
ok  	github.com/maynagashev/go-metrics/internal/server/handlers/json/update	(cached)
testing: warning: no tests to run
PASS
ok  	github.com/maynagashev/go-metrics/internal/server/handlers/json/value	(cached) [no tests to run]
=== RUN   TestUpdateHandler
=== RUN   TestUpdateHandler/update_gauge
=== RUN   TestUpdateHandler/update_counter
=== RUN   TestUpdateHandler/invalid_metrics_type
=== RUN   TestUpdateHandler/invalid_url
--- PASS: TestUpdateHandler (0.00s)
    --- PASS: TestUpdateHandler/update_gauge (0.00s)
    --- PASS: TestUpdateHandler/update_counter (0.00s)
    --- PASS: TestUpdateHandler/invalid_metrics_type (0.00s)
    --- PASS: TestUpdateHandler/invalid_url (0.00s)
PASS
ok  	github.com/maynagashev/go-metrics/internal/server/handlers/plain/update	(cached)
testing: warning: no tests to run
PASS
ok  	github.com/maynagashev/go-metrics/internal/server/handlers/plain/value	(cached) [no tests to run]
=== RUN   TestNew
--- PASS: TestNew (0.01s)
PASS
ok  	github.com/maynagashev/go-metrics/internal/server/router	(cached)
=== RUN   TestMemoryStorage
=== RUN   TestMemoryStorage/memory_storage
--- PASS: TestMemoryStorage (0.00s)
    --- PASS: TestMemoryStorage/memory_storage (0.00s)
PASS
ok  	github.com/maynagashev/go-metrics/internal/server/storage	(cached)
=== RUN   TestMemStorage_GetMetric
=== RUN   TestMemStorage_GetMetric/get_counter
--- PASS: TestMemStorage_GetMetric (0.00s)
    --- PASS: TestMemStorage_GetMetric/get_counter (0.00s)
=== RUN   TestMemStorage_UpdateCounter
=== RUN   TestMemStorage_UpdateCounter/update_counter
--- PASS: TestMemStorage_UpdateCounter (0.00s)
    --- PASS: TestMemStorage_UpdateCounter/update_counter (0.00s)
PASS
ok  	github.com/maynagashev/go-metrics/internal/server/storage/memory	(cached)
