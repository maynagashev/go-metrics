# Staticlint

Staticlint - это кастомный статический анализатор кода для Go, объединяющий различные линтеры для проверки кода.

## Состав анализатора

Анализатор включает в себя:

1. **Собственный анализатор**:
   - `errcheck` - проверяет необработанные ошибки в коде

2. **Стандартные анализаторы** из пакета `golang.org/x/tools/go/analysis/passes`:
   - `printf` - проверяет корректность форматных строк в функциях printf
   - `shadow` - проверяет наличие затененных переменных
   - `structtag` - проверяет корректность тегов структур

3. **Все анализаторы класса SA** из пакета `staticcheck.io`:
   - SA1000-SA9999 - различные проверки корректности кода

4. **Дополнительные анализаторы** из других классов пакета `staticcheck.io`:
   - ST1000 - проверка наличия комментария к пакету
   - Другие анализаторы, указанные в конфигурационном файле

5. **Публичные анализаторы**:
   - `exhaustive` - проверяет полноту switch для перечислений (enums). Этот анализатор гарантирует, что все возможные значения перечисления обрабатываются в switch-case конструкциях, что помогает избежать ошибок при добавлении новых значений в enum.
   - `bodyclose` - проверяет, что тела HTTP-ответов закрываются. Этот анализатор помогает избежать утечек ресурсов при работе с HTTP-клиентами, гарантируя, что метод `resp.Body.Close()` вызывается для всех HTTP-ответов.

## Конфигурация

Анализатор поддерживает конфигурационный файл `config.json`, который должен находиться в текущей директории или в директории `cmd/staticlint`. Пример содержимого файла:

```json
{
    "staticcheck": [
        "SA4006",
        "SA5000",
        "SA6000",
        "SA9004"
    ],
    "stylecheck": [
        "ST1000",
        "ST1003",
        "ST1005"
    ]
}
```

## Использование

Для запуска анализатора выполните:

```bash
go run cmd/staticlint/staticlint.go ./...
```

или скомпилируйте и запустите:

```bash
go build -o staticlint ./cmd/staticlint
./staticlint ./...
```

## Примечание

В текущей реализации анализатор читает конфигурационный файл и добавляет анализаторы из staticcheck и stylecheck, указанные в этом файле. 
Если файл конфигурации отсутствует или содержит ошибки, анализатор запускает все доступные анализаторы.

Анализатор включает в себя широкий набор проверок, которые помогут улучшить качество кода:
- Проверка обработки ошибок
- Поиск проблем с конкурентностью
- Анализ использования nil
- Проверка HTTP-обработчиков
- Поиск неиспользуемого кода
- Проверка форматирования и стиля кода
- Проверка полноты обработки перечислений
- Проверка закрытия тел HTTP-ответов
- И многие другие 